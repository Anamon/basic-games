100 REM ROBOT ATTACK
110 CALL CLEAR
120 PRINT "PREPARE YOURSELF FOR ...": : : : : : : : :
130 PRINT "A ROBOT ATTACK"
140 NB=10
150 NR=10
160 OPTION BASE 1
170 DIM ROBOT(100,2),DXT(26),DYT(26),LIVE(100),CLR(2)
180 CLR(1)=2
190 CLR(2)=16
200 FOR I=1 TO 8
210 READ INDEX,DXT(INDEX),DYT(INDEX)
220 NEXT I
230 DATA 3,0,1,5,0,-1,24,-1,1,22,1,1,6,1,0,18,1,-1,23,-1,-1,19,-1,0
240 CALL CHAR(128,"1898FF3D3C3CE404")
250 CALL COLOR(13,7,1)
260 CALL CHAR(136,"FFFFFFFFFFFFFFFF")
270 CALL COLOR(14,5,1)
280 CALL CHAR(96,"FFA5A5BDBDA5A5FF")
290 CALL COLOR(9,12,1)
300 CALL CHAR(104,"003C3C3C3C3C3C00")
310 CALL CLEAR
320 DEAD=0
330 X=INT(RND*28)+3
340 Y=INT(RND*24)+1
350 CALL HCHAR(Y,X,128)
360 FOR I=1 TO NB
370 X1=INT(RND*28)+3
380 Y1=INT(RND*24)+1
390 CALL GCHAR(Y1,X1,STATUS)
400 IF STATUS<>32 THEN 370
410 CALL HCHAR(Y1,X1,136)
420 NEXT I
430 FOR I=1 TO NR
440 LIVE(I)=1
450 X1=INT(RND*28)+3
460 Y1=INT(RND*24)+1
470 FOR DX=-1 TO 1
480 IF (X1+DX>32)+(X1+DX<1)THEN 540
490 FOR DY=-1 TO 1
500 IF (Y1+DY>24)+(Y1+DY<1)THEN 530
510 CALL GCHAR(Y1+DY,X1+DX,STATUS)
520 IF STATUS<>32 THEN 450
530 NEXT DY
540 NEXT DX
550 CALL HCHAR(Y1,X1,104)
560 ROBOT(I,1)=X1
570 ROBOT(I,2)=Y1
580 NEXT I
590 FOR R=1 TO NR
600 CALL SOUND(40,1760,0,1600,0,880,0,-4,0)
610 CALL COLOR(10,CLR(R-INT(R/2)*2+1),1)
620 IF LIVE(R)=0 THEN 800
630 CALL KEY(3,KEY,STATUS)
640 IF STATUS THEN 820
650 XO=ROBOT(R,1)
660 YO=ROBOT(R,2)
670 CALL GCHAR(YO,XO,STATUS)
680 IF STATUS=104 THEN 710
690 LIVE(R)=0
695 CALL HCHAR(ROBOT(R,2),ROBOT(R,1),96)
700 GOTO 800
710 DX=SGN(X-XO)
720 DY=SGN(Y-YO)
730 CALL HCHAR(YO,XO,32)
740 ROBOT(R,1)=XO+DX
750 ROBOT(R,2)=YO+DY
760 CALL GCHAR(ROBOT(R,2),ROBOT(R,1),STATUS)
770 IF STATUS=128 THEN 1070
780 IF STATUS<>32 THEN 980
790 CALL HCHAR(ROBOT(R,2),ROBOT(R,1),104)
800 NEXT R
810 GOTO 590
820 IF (KEY<65)+(KEY>90)THEN 710
830 KEY=KEY-64
840 IF (DXT(KEY)=0)*(DYT(KEY)=0)THEN 710
850 CALL HCHAR(Y,X,32)
860 XO=X
870 YO=Y
880 X=X+DXT(KEY)
890 Y=Y+DYT(KEY)
900 IF (X>32)+(X<1)+(Y>24)+(Y<1)THEN 940
910 CALL GCHAR(Y,X,STATUS)
920 IF STATUS=104 THEN 1070
930 IF STATUS=32 THEN 960
940 Y=YO
950 X=XO
960 CALL HCHAR(Y,X,128)
970 GOTO 650
980 DEAD=DEAD+1
990 CALL SOUND(1000,110,0)
1000 IF DEAD=NR THEN 1100
1010 IF STATUS<>104 THEN 1050
1020 DEAD=DEAD+1
1030 IF DEAD=NR THEN 1100
1040 CALL HCHAR(ROBOT(R,2),ROBOT(R,1),96)
1050 LIVE(R)=0
1060 GOTO 800
1070 CALL CLEAR
1080 PRINT "THE HUMAN IS DEAD. LONG LIVETHE TI-99/4A."
1090 GOTO 1120
1100 CALL CLEAR
1110 PRINT "YOU HAVE WON FOR THE PRESENT     -- YOU VILE HUMAN."
1120 PRINT : : : : :"CARE TO TRY AGAIN?";
1130 CALL KEY(3,KEY,STATUS)
1140 IF STATUS=0 THEN 1130
1150 IF KEY=89 THEN 310
1160 IF KEY<>78 THEN 1130
1170 END
